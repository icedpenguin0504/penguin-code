---
title: sshでサーバ上でコマンドを実行する
tags:
- ssh
category:
- Tech
- Linux
---

sshを使ってサーバ上でコマンドやバッチファイルを実行する方法メモ。

<!-- more -->

# sshの書式

基本の書式は以下：

```
ssh ユーザ名@ホスト名 [コマンド]
```

秘密鍵を使う場合は

```
ssh -i 秘密鍵 ユーザ@ホスト名 [コマンド]
```


コマンドなしで実行した場合、`ユーザ@ホスト名`で指定した接続先にログインします。
コマンドを付けると接続先でコマンドを実行してくれます。

# ローカルのファイルをリモートで実行

```
ssh ユーザ名@ホスト名 < ローカルのファイル
```

これでローカルにあるスクリプトをリモートで実行することができます。

# コマンド実行結果をファイルに保存

標準出力をファイルに保存するには次のようにリダイレクトしてあげます。

```
ssh ユーザ名@ホスト名 コマンド > ログファイル
```

標準エラー出力を保存したい場合は`>`を`2>`とします。

リモートでローカルのファイルを実行してその結果をローカルのファイルに保存する場合は次のようにします。

```
ssh ユーザ名@ホスト名 < ローカルのスクリプトファイル > ローカルのログファイル
```

## 参考

- [SSHでリモートのコマンド実行結果を取得](http://www.ajisaba.net/sh/ssh_remote.html)
